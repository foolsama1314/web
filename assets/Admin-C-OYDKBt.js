import{_ as k,r as b,o as B,c as C,a as u,b as t,w as o,g as c,e as h,O as P,f as v,a1 as M,M as F,J as S,a6 as D,t as N,a7 as g,B as O,E as m,k as q}from"./index-o71zQlQf.js";const I={class:"admin"},$={class:"admin-content"},A={class:"card-header"},H={class:"form-actions"},J={__name:"Admin",setup(L){const r=b([]),a=b({id:null,title:"",author:"foolsama",category:"",description:"",technologies:[],githubUrl:""}),f=b(""),w=async()=>{try{const e=await(await fetch("/api/projects",{headers:{...g()}})).json();r.value=e}catch(l){console.error("Failed to fetch projects:",l),r.value=[{id:1,title:"基于Vue 3的电商网站",description:"一个使用Vue 3和Express开发的电商网站，包含商品展示、购物车、订单管理等功能。",author:"foolsama",date:"2025-05-20",category:"Web开发",technologies:["Vue 3","Express","MongoDB"],githubUrl:"https://github.com/foolsama/e-commerce"},{id:2,title:"机器学习图像识别系统",description:"使用Python和TensorFlow开发的图像识别系统，能够识别多种物体。",author:"foolsama",date:"2025-06-15",category:"人工智能",technologies:["Python","TensorFlow","OpenCV"],githubUrl:"https://github.com/foolsama/image-recognition"},{id:3,title:"智能健康监测手环",description:"基于STM32开发的智能健康监测手环，能够监测心率、血压、睡眠质量等。",author:"foolsama",date:"2025-07-10",category:"嵌入式开发",technologies:["STM32","BLE","传感器"],githubUrl:"https://github.com/foolsama/health-band"}]}},j=l=>{a.value={...l},f.value=l.technologies.join(", ")},y=()=>{a.value={id:null,title:"",author:"foolsama",category:"",description:"",technologies:[],githubUrl:""},f.value=""},x=async()=>{const l={...a.value,technologies:f.value.split(",").map(e=>e.trim()).filter(e=>e)};try{let e;if(l.id?e=await fetch(`/api/projects/${l.id}`,{method:"PUT",headers:{"Content-Type":"application/json",...g()},body:JSON.stringify(l)}):e=await fetch("/api/projects",{method:"POST",headers:{"Content-Type":"application/json",...g()},body:JSON.stringify(l)}),e.ok){const n=await e.json();if(l.id){const i=r.value.findIndex(_=>_.id===l.id);i!==-1&&(r.value[i]=n)}else r.value.push(n);y(),m.success("项目保存成功！")}else m.error("项目保存失败！"),console.error("Failed to save project:",e.status)}catch(e){m.error("项目保存失败！"),console.error("Failed to save project:",e)}},U=async l=>{try{await O.confirm("确定要删除这个项目吗？","删除确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});const e=await fetch(`/api/projects/${l}`,{method:"DELETE",headers:{...g()}});e.ok?(r.value=r.value.filter(n=>n.id!==l),m.success("项目删除成功！")):(m.error("项目删除失败！"),console.error("Failed to delete project:",e.status))}catch(e){e!=="cancel"&&(m.error("项目删除失败！"),console.error("Failed to delete project:",e))}};return B(()=>{w()}),(l,e)=>{const n=c("el-table-column"),i=c("el-button"),_=c("el-table"),V=c("el-card"),p=c("el-input"),d=c("el-form-item"),E=c("el-form");return q(),C("div",I,[e[11]||(e[11]=u("h2",null,"项目管理",-1)),u("div",$,[t(V,{shadow:"hover",class:"projects-card"},{header:o(()=>[...e[6]||(e[6]=[u("div",{class:"card-header"},[u("h3",null,"项目列表")],-1)])]),default:o(()=>[t(_,{data:r.value,style:{width:"100%"}},{default:o(()=>[t(n,{prop:"id",label:"ID",width:"80",align:"center"}),t(n,{prop:"title",label:"标题"}),t(n,{prop:"author",label:"作者",width:"120",align:"center"}),t(n,{prop:"date",label:"日期",width:"150",align:"center"}),t(n,{label:"操作",width:"240",align:"center"},{default:o(s=>[t(i,{type:"primary",size:"small",onClick:T=>j(s.row),icon:h(P),class:"action-button"},{default:o(()=>[...e[7]||(e[7]=[v(" 编辑 ",-1)])]),_:1},8,["onClick","icon"]),t(i,{type:"danger",size:"small",onClick:T=>U(s.row.id),icon:h(M),class:"action-button"},{default:o(()=>[...e[8]||(e[8]=[v(" 删除 ",-1)])]),_:1},8,["onClick","icon"])]),_:1})]),_:1},8,["data"])]),_:1}),t(V,{shadow:"hover",class:"form-card"},{header:o(()=>[u("div",A,[u("h3",null,N(a.value.id?"编辑项目":"添加项目"),1)])]),default:o(()=>[t(E,{model:a.value,onSubmit:F(x,["prevent"]),"label-width":"120px"},{default:o(()=>[t(d,{label:"标题",required:""},{default:o(()=>[t(p,{modelValue:a.value.title,"onUpdate:modelValue":e[0]||(e[0]=s=>a.value.title=s),placeholder:"请输入项目标题"},null,8,["modelValue"])]),_:1}),t(d,{label:"作者",required:""},{default:o(()=>[t(p,{modelValue:a.value.author,"onUpdate:modelValue":e[1]||(e[1]=s=>a.value.author=s),placeholder:"请输入作者姓名"},null,8,["modelValue"])]),_:1}),t(d,{label:"分类",required:""},{default:o(()=>[t(p,{modelValue:a.value.category,"onUpdate:modelValue":e[2]||(e[2]=s=>a.value.category=s),placeholder:"请输入项目分类"},null,8,["modelValue"])]),_:1}),t(d,{label:"描述",required:""},{default:o(()=>[t(p,{type:"textarea",modelValue:a.value.description,"onUpdate:modelValue":e[3]||(e[3]=s=>a.value.description=s),rows:4,placeholder:"请输入项目描述"},null,8,["modelValue"])]),_:1}),t(d,{label:"技术栈"},{default:o(()=>[t(p,{modelValue:f.value,"onUpdate:modelValue":e[4]||(e[4]=s=>f.value=s),placeholder:"例如：Vue 3, Express, MongoDB"},null,8,["modelValue"])]),_:1}),t(d,{label:"GitHub URL"},{default:o(()=>[t(p,{modelValue:a.value.githubUrl,"onUpdate:modelValue":e[5]||(e[5]=s=>a.value.githubUrl=s),placeholder:"请输入项目GitHub链接"},null,8,["modelValue"])]),_:1}),t(d,null,{default:o(()=>[u("div",H,[t(i,{type:"primary","native-type":"submit",icon:h(S)},{default:o(()=>[...e[9]||(e[9]=[v(" 保存 ",-1)])]),_:1},8,["icon"]),t(i,{onClick:y,icon:h(D)},{default:o(()=>[...e[10]||(e[10]=[v(" 取消 ",-1)])]),_:1},8,["icon"])])]),_:1})]),_:1},8,["model"])]),_:1})])])}}},G=k(J,[["__scopeId","data-v-637e0099"]]);export{G as default};
